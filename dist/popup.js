document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("profile"),n=document.getElementById("status"),s=document.getElementById("target-select"),e=document.getElementById("target");chrome.storage.sync.get(["profile","target","custom"],t=>{t.profile&&(l.value=t.profile),t.custom&&(e.value=t.custom),t.target&&(["_blank","_self","_parent","_top"].includes(t.target)?(s.value=t.target,e.style.display="none"):t.target==="profile"?(s.value="profile",l.style.display="",e.style.display="none"):(s.value="custom",l.style.display="none",e.style.display=""))}),s.addEventListener("change",()=>{s.value==="profile"?(l.style.display="",e.style.display="none",l.focus()):s.value==="custom"?(l.style.display="none",e.style.display="",e.focus()):(l.style.display="none",e.style.display="none")}),document.getElementById("save").onclick=()=>{let t=s.value,o=e.value.trim();if(t==="custom"&&!o){n.textContent="カスタム名を入力してください",e.focus();return}chrome.storage.sync.set({profile:l.value,target:t,custom:e.value},()=>{n.textContent="保存しました",setTimeout(()=>n.textContent="",1500)})}});
